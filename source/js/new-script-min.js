var output=document.getElementById("attribution-text"),outputHTML=document.getElementById("attribution-html"),titleInput=document.getElementById("title"),titleURLInput=document.getElementById("title-url"),titleStr="",authorInput=document.getElementById("author"),authorURLInput=document.getElementById("author-url"),authorStr="",orgInput=document.getElementById("organisation"),orgURLInput=document.getElementById("organisation-url"),orgStr="",projectInput=document.getElementById("project"),projectURLInput=document.getElementById("project-url"),projectStr="",licenseInput=document.getElementById("license-select"),licenseVersion=document.getElementById("version"),licenseStr="",derivativeURLInput=document.getElementById("derivative-url"),derivativeStr="";function changeTitle(){titleStr=createLink(titleInput.value,titleURLInput.value),buildAttribution()}function changeAuthor(){authorStr=" by "+createLink(authorInput.value,authorURLInput.value),buildAttribution()}function changeOrg(){orgStr=", "+createLink(orgInput.value,orgURLInput.value),buildAttribution()}function changeProject(){projectStr=", "+createLink(projectInput.value,projectURLInput.value),buildAttribution()}function changeDerivative(){derivativeStr=" / A derivative from the "+createLink("original work",derivativeURLInput.value),buildAttribution()}function changeLicense(){console.log("Change License")}function createLink(t,e){return""==t?"":""==e?'<a>"'+t+'"</a>':'<a href="'+e+'">"'+t+'"</a>'}function buildAttribution(){var t=titleStr+authorStr+projectStr+orgStr+licenseStr+derivativeStr;output.innerHTML=t,outputHTML.innerHTML=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function checkURL(t){if(""==t.target.value);else if(isValidUrl(t.target.value)){/^((http|https|ftp):\/\/)/.test(t.target.value)||(t.target.value="https://"+t.target.value)}else console.log("Show URL error"),t.target.focus();t.target==titleURLInput?(""==titleInput.value&&(titleInput.value="This work"),changeTitle()):t.target==authorURLInput?changeAuthor():t.target==orgURLInput?changeOrg():t.target==projectURLInput?changeProject():t.target==derivativeURLInput&&changeDerivative()}const isValidUrl=t=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t);function addProtocol(t){/^((http|https|ftp):\/\/)/.test(t)||(t="https://"+t)}titleInput.addEventListener("input",changeTitle),titleURLInput.addEventListener("input",changeTitle),titleURLInput.addEventListener("focusout",checkURL),authorInput.addEventListener("input",changeAuthor),authorURLInput.addEventListener("input",changeAuthor),authorURLInput.addEventListener("focusout",checkURL),projectInput.addEventListener("input",changeProject),projectURLInput.addEventListener("input",changeProject),projectURLInput.addEventListener("focusout",checkURL),orgInput.addEventListener("input",changeOrg),orgURLInput.addEventListener("input",changeOrg),orgURLInput.addEventListener("focusout",checkURL),derivativeURLInput.addEventListener("input",changeDerivative),derivativeURLInput.addEventListener("focusout",checkURL),licenseInput.addEventListener("change",changeLicense),licenseVersion.addEventListener("change",changeLicense);