var titleOutput,authorOutput,lincenseOutput,derivativeOutput,organizationOutput,projectOutput,output;function unHighlight(){titleOutput.removeAttribute("class"),authorOutput.removeAttribute("class"),lincenseOutput.removeAttribute("class"),derivativeOutput.removeAttribute("class"),organizationOutput.removeAttribute("class"),projectOutput.removeAttribute("class")}function SelectAll(t){var e=document.getElementById(t);e.focus(),e.select()}function SelectText(t){var e,u=document,n=u.getElementById(t);if(u.body.createTextRange)(e=u.body.createTextRange()).moveToElementText(n),e.select();else if(window.getSelection){var i=window.getSelection();(e=u.createRange()).selectNodeContents(n),i.removeAllRanges(),i.addRange(e)}}function isValidURL(t){var e=/^((ftp:|http:|https:)?\/\/)?[^ "]+$/;return!!e.test(t.value)&&((e=/^(ftp:|http:|https:)?\/\//).test(t.value)||(t.value="http://"+t.value),!0)}function onloadform(){document.getElementById("AtributionForm").reset(),titleOutput=document.createElement("a"),authorOutput=document.createElement("a"),lincenseOutput=document.createElement("a"),derivativeOutput=document.createElement("a"),organizationOutput=document.createElement("a"),projectOutput=document.createElement("a");var t=document.createTextNode(""),e=document.createTextNode(""),u=document.createTextNode(""),n=document.createTextNode(""),i=document.createTextNode("");output.innerHTML="",output.appendChild(titleOutput),output.appendChild(t),output.appendChild(authorOutput),output.appendChild(e),output.appendChild(projectOutput),output.appendChild(u),output.appendChild(organizationOutput),output.appendChild(n),output.appendChild(lincenseOutput),output.appendChild(i),output.appendChild(derivativeOutput),output.style.display="none"}function onchangevalue(t){unHighlight(),$("#output").show(),""==titleOutput.innerHTML&&(titleOutput.innerHTML='"This work"'),"titleTextBox"==t.id&&(titleOutput.setAttribute("class","highlight"),titleOutput.innerHTML='"'+t.value+'"'),"authornameTextBox"==t.id&&(""!=organizationOutput.innerHTML&&(commaOrganization.nodeValue=", "),""!=projectOutput.innerHTML&&(commaproject.nodeValue=", "),by.nodeValue=" by ",authorOutput.setAttribute("class","highlight"),authorOutput.innerHTML=t.value),"OrganizationTextBox"==t.id&&(""!=authorOutput.innerHTML||""!=projectOutput.innerHTML?commaOrganization.nodeValue=", ":commaOrganization.nodeValue="",by.nodeValue=" by ",organizationOutput.setAttribute("class","highlight"),organizationOutput.innerHTML=t.value),"ProjectTextBox"==t.id&&(""!=authorOutput.innerHTML?commaproject.nodeValue=", ":commaproject.nodeValue="",""!=organizationOutput.innerHTML?commaOrganization.nodeValue=", ":commaOrganization.nodeValue="",by.nodeValue=" by ",projectOutput.setAttribute("class","highlight"),projectOutput.innerHTML=t.value)}function changeTitle(){unHighlight();var t=document.getElementById("titleTextBox"),e=document.getElementById("titleURLTextBox");t.value.length>0?titleOutput.innerHTML='"'+t.value+'"':titleOutput.innerHTML='"This work"',isValidURL(e)&&e.value.length>0?($("#ItemUrlPrompt").hide(),titleOutput.href=e.value,titleOutput.target="_blank"):(e.value.length>0&&$("#ItemUrlPrompt").show(),titleOutput.removeAttribute("href"),titleOutput.removeAttribute("target"),e.focus(),e.select())}function changeAuthor(){unHighlight();var t=document.getElementById("authornameTextBox"),e=document.getElementById("authorURLTextBox");t.value.length>0?(authorOutput.innerHTML=t.value,""!=organizationOutput.innerHTML&&(commaOrganization.nodeValue=", "),""!=projectOutput.innerHTML&&(commaproject.nodeValue=", "),isValidURL(e)&&e.value.length>0?($("#AuthorUrlPrompt").hide(),authorOutput.href=e.value,authorOutput.target="_blank"):(e.value.length>0&&$("#AuthorUrlPrompt").show(),authorOutput.removeAttribute("href"),authorOutput.removeAttribute("target"),e.focus(),e.select()),by.nodeValue=" by "):(by.nodeValue="",authorOutput.innerHTML="",authorOutput.removeAttribute("href"),authorOutput.removeAttribute("target"))}function changeLicense(){unHighlight(),window.getSelection().removeAllRanges();var t=document.getElementById("LicenseListBox"),e=document.getElementById("VersionDropDown");LicenceIndex=t.options[t.selectedIndex].index;var u=e.options[e.selectedIndex].value;LicenceIndex<7&&0!=LicenceIndex?e.disabled=!1:(e.disabled=!0,e.selectedIndex=0);var n=t.options[t.selectedIndex].value;if(0!=LicenceIndex){1==e.disabled&&(u=""),is_licensed_under.nodeValue=" is licensed under ";var i="http://creativecommons.org/licenses/"+(n.substring(3,n.length)+"/"+u).toLocaleLowerCase();7==LicenceIndex&&(is_licensed_under.nodeValue=" is in the ",i="https://wiki.creativecommons.org/Public_domain"),8==LicenceIndex&&(is_licensed_under.nodeValue=" is in the ",i="http://creativecommons.org/publicdomain/zero/1.0/"),lincenseOutput.href=i,lincenseOutput.target="_blank",lincenseOutput.innerHTML=(t.options[t.selectedIndex].value+" "+u).trim()}else lincenseOutput.removeAttribute("href"),lincenseOutput.removeAttribute("target"),lincenseOutput.innerHTML=""}function changeDerivative(){unHighlight();var t=document.getElementById("DerivativeCheckBox"),e=document.getElementById("DerivativeTextBox");t.checked?e.disabled=!1:(e.value="",e.disabled=!0),t.checked?e.value.length>0&&isValidURL(e)?($("#DerivUrlPrompt").hide(),derivativeOutput.href=e.value,derivativeOutput.target="_blank",derivativeOutput.innerHTML="original work",derivative_text.nodeValue=" / A derivative from the "):($("#DerivUrlPrompt").show(),derivativeOutput.removeAttribute("href"),derivativeOutput.removeAttribute("target"),derivativeOutput.innerHTML="",derivative_text.nodeValue="",e.focus(),e.select()):(derivativeOutput.removeAttribute("href"),derivativeOutput.removeAttribute("target"),derivativeOutput.innerHTML="",derivative_text.nodeValue="")}function changeProject(){unHighlight();var t=document.getElementById("ProjectTextBox"),e=document.getElementById("ProjectURLTextBox");t.value.length>0?(""!=authorOutput.innerHTML?commaproject.nodeValue=", ":commaproject.nodeValue="",""!=organizationOutput.innerHTML?commaOrganization.nodeValue=", ":commaOrganization.nodeValue="",projectOutput.innerHTML=t.value,isValidURL(e)&&e.value.length>0?($("#ProjectUrlPrompt").hide(),projectOutput.href=e.value,projectOutput.target="_blank"):(e.value.length>0&&$("#ProjectUrlPrompt").show(),projectOutput.removeAttribute("href"),projectOutput.removeAttribute("target"),e.focus(),e.select())):(commaproject.nodeValue="",projectOutput.innerHTML="",projectOutput.removeAttribute("href"),projectOutput.removeAttribute("target"))}function changeOrganization(){unHighlight();var t=document.getElementById("OrganizationTextBox"),e=document.getElementById("OrganizationURLTextBox");t.value.length>0?(""!=authorOutput.innerHTML||""!=projectOutput.innerHTML?commaOrganization.nodeValue=", ":commaOrganization.nodeValue="",organizationOutput.innerHTML=t.value,isValidURL(e)&&e.value.length>0?($("#OrgUrlPrompt").hide(),organizationOutput.href=e.value,organizationOutput.target="_blank"):(e.value.length>0&&$("#OrgUrlPrompt").show(),organizationOutput.removeAttribute("href"),organizationOutput.removeAttribute("target"),e.focus(),e.select())):(commaOrganization.nodeValue="",organizationOutput.innerHTML="",organizationOutput.removeAttribute("href"),organizationOutput.removeAttribute("target"))}function checkInput(t){handleLicensePrompt(),0==document.getElementById("titleTextBox").value.length&&(titleOutput.innerHTML='"This work"');var e=document.getElementById("output-html"),u=output.innerHTML.replace(' class="highlight"',""),n=new RegExp("<a></a>","g");u=u.replace(n,""),e.value=u}function handleLicensePrompt(){0==$("#LicenseListBox")[0].selectedIndex?$("#LicensePrompt").show():$("#LicensePrompt").hide()}